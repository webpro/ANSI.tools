import { test } from "node:test";
import { readFileSync } from "node:fs";
import { fileURLToPath } from "node:url";
import { dirname, join } from "node:path";
import assert from "node:assert/strict";
import { tokenize } from "../src/tokenize.ts";
import { parse } from "../src/parse.ts";

const __dirname = dirname(fileURLToPath(import.meta.url));
const tortureFilePath = join(__dirname, "../../../apps/web/public/torturet.vt");
const content = readFileSync(tortureFilePath, "utf8");

test("VT100 torture test (tokenize)", () => {
  const actual = tokenize(content);

  const expected = [
    { type: "INTRODUCER", pos: 0, raw: "\u001b", code: "\u001b" },
    { type: "FINAL", pos: 1, raw: "\\" },
    { type: "INTRODUCER", pos: 2, raw: "\u001b", code: "\u001b" },
    { type: "FINAL", pos: 3, raw: "<" },
    { type: "INTRODUCER", pos: 4, raw: "\u001b", code: "\u001b" },
    { type: "FINAL", pos: 5, raw: ">" },
    { type: "INTRODUCER", pos: 6, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 8, raw: "H" },
    { type: "INTRODUCER", pos: 9, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 11, raw: "1;2;3;4" },
    { type: "FINAL", pos: 18, raw: "q" },
    { type: "INTRODUCER", pos: 19, raw: "\u001bP", code: "P" },
    { type: "DATA", pos: 21, raw: "rEM1" },
    { type: "FINAL", pos: 25, raw: "\u001b\\" },
    { type: "INTRODUCER", pos: 27, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 29, raw: "?4" },
    { type: "FINAL", pos: 31, raw: "h" },
    { type: "INTRODUCER", pos: 32, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 34, raw: "0" },
    { type: "FINAL", pos: 35, raw: "m" },
    { type: "TEXT", pos: 36, raw: "\n" },
    { type: "INTRODUCER", pos: 37, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 39, raw: "H" },
    { type: "INTRODUCER", pos: 40, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 42, raw: "J" },
    { type: "INTRODUCER", pos: 43, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 45, raw: "7" },
    { type: "FINAL", pos: 46, raw: "m" },
    { type: "INTRODUCER", pos: 47, raw: "\u001b#", code: "\u001b", intermediate: "#" },
    { type: "FINAL", pos: 49, raw: "6" },
    { type: "INTRODUCER", pos: 50, raw: "\u001b(", code: "\u001b", intermediate: "(" },
    { type: "FINAL", pos: 52, raw: "0" },
    { type: "TEXT", pos: 53, raw: "a`opqrs`" },
    { type: "INTRODUCER", pos: 61, raw: "\u001b(", code: "\u001b", intermediate: "(" },
    { type: "FINAL", pos: 63, raw: "B" },
    { type: "TEXT", pos: 64, raw: "      This is the       " },
    { type: "INTRODUCER", pos: 88, raw: "\u001b(", code: "\u001b", intermediate: "(" },
    { type: "FINAL", pos: 90, raw: "0" },
    { type: "TEXT", pos: 91, raw: "`srqpo`a" },
    { type: "INTRODUCER", pos: 99, raw: "\u001b(", code: "\u001b", intermediate: "(" },
    { type: "FINAL", pos: 101, raw: "B" },
    { type: "INTRODUCER", pos: 102, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 104, raw: "1" },
    { type: "FINAL", pos: 105, raw: "m" },
    { type: "TEXT", pos: 106, raw: "\n" },
    { type: "INTRODUCER", pos: 107, raw: "\u001b#", code: "\u001b", intermediate: "#" },
    { type: "FINAL", pos: 109, raw: "3" },
    { type: "TEXT", pos: 110, raw: "VT100 series Torture Test Demonstration.\n" },
    { type: "INTRODUCER", pos: 151, raw: "\u001b#", code: "\u001b", intermediate: "#" },
    { type: "FINAL", pos: 153, raw: "4" },
    { type: "TEXT", pos: 154, raw: "VT100 series Torture Test Demonstration.\n" },
    { type: "INTRODUCER", pos: 195, raw: "\u001b#", code: "\u001b", intermediate: "#" },
    { type: "FINAL", pos: 197, raw: "6" },
    { type: "INTRODUCER", pos: 198, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 200, raw: "1;5" },
    { type: "FINAL", pos: 203, raw: "m" },
    { type: "TEXT", pos: 204, raw: "       Watch the blinking lights        " },
    { type: "INTRODUCER", pos: 244, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 246, raw: "4;24" },
    { type: "FINAL", pos: 250, raw: "r" },
    { type: "INTRODUCER", pos: 251, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 253, raw: "0" },
    { type: "FINAL", pos: 254, raw: "m" },
    { type: "TEXT", pos: 255, raw: "\n\u0007" },
    { type: "INTRODUCER", pos: 257, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 259, raw: "0" },
    { type: "FINAL", pos: 260, raw: "q" },
    { type: "INTRODUCER", pos: 261, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 263, raw: "1" },
    { type: "FINAL", pos: 264, raw: "q" },
    { type: "INTRODUCER", pos: 265, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 267, raw: "0" },
    { type: "FINAL", pos: 268, raw: "q" },
    { type: "INTRODUCER", pos: 269, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 271, raw: "2" },
    { type: "FINAL", pos: 272, raw: "q" },
    { type: "INTRODUCER", pos: 273, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 275, raw: "0" },
    { type: "FINAL", pos: 276, raw: "q" },
    { type: "INTRODUCER", pos: 277, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 279, raw: "3" },
    { type: "FINAL", pos: 280, raw: "q" },
    { type: "INTRODUCER", pos: 281, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 283, raw: "0" },
    { type: "FINAL", pos: 284, raw: "q" },
    { type: "INTRODUCER", pos: 285, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 287, raw: "4" },
    { type: "FINAL", pos: 288, raw: "q" },
    { type: "INTRODUCER", pos: 289, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 291, raw: "0" },
    { type: "FINAL", pos: 292, raw: "q" },
    { type: "TEXT", pos: 293, raw: "\n\u0007" },
    { type: "INTRODUCER", pos: 295, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 297, raw: "0" },
    { type: "FINAL", pos: 298, raw: "q" },
    { type: "INTRODUCER", pos: 299, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 301, raw: "1" },
    { type: "FINAL", pos: 302, raw: "q" },
    { type: "INTRODUCER", pos: 303, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 305, raw: "0" },
    { type: "FINAL", pos: 306, raw: "q" },
    { type: "INTRODUCER", pos: 307, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 309, raw: "2" },
    { type: "FINAL", pos: 310, raw: "q" },
    { type: "INTRODUCER", pos: 311, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 313, raw: "0" },
    { type: "FINAL", pos: 314, raw: "q" },
    { type: "INTRODUCER", pos: 315, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 317, raw: "3" },
    { type: "FINAL", pos: 318, raw: "q" },
    { type: "INTRODUCER", pos: 319, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 321, raw: "0" },
    { type: "FINAL", pos: 322, raw: "q" },
    { type: "INTRODUCER", pos: 323, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 325, raw: "4" },
    { type: "FINAL", pos: 326, raw: "q" },
    { type: "INTRODUCER", pos: 327, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 329, raw: "0" },
    { type: "FINAL", pos: 330, raw: "q" },
    { type: "TEXT", pos: 331, raw: "\n\u0007" },
    { type: "INTRODUCER", pos: 333, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 335, raw: "0" },
    { type: "FINAL", pos: 336, raw: "q" },
    { type: "INTRODUCER", pos: 337, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 339, raw: "1" },
    { type: "FINAL", pos: 340, raw: "q" },
    { type: "INTRODUCER", pos: 341, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 343, raw: "0" },
    { type: "FINAL", pos: 344, raw: "q" },
    { type: "INTRODUCER", pos: 345, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 347, raw: "2" },
    { type: "FINAL", pos: 348, raw: "q" },
    { type: "INTRODUCER", pos: 349, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 351, raw: "0" },
    { type: "FINAL", pos: 352, raw: "q" },
    { type: "INTRODUCER", pos: 353, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 355, raw: "3" },
    { type: "FINAL", pos: 356, raw: "q" },
    { type: "INTRODUCER", pos: 357, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 359, raw: "0" },
    { type: "FINAL", pos: 360, raw: "q" },
    { type: "INTRODUCER", pos: 361, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 363, raw: "4" },
    { type: "FINAL", pos: 364, raw: "q" },
    { type: "INTRODUCER", pos: 365, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 367, raw: "0" },
    { type: "FINAL", pos: 368, raw: "q" },
    { type: "TEXT", pos: 369, raw: "\n" },
    { type: "INTRODUCER", pos: 370, raw: "\u001bP", code: "P" },
    { type: "DATA", pos: 372, raw: "rEM0" },
    { type: "FINAL", pos: 376, raw: "\u001b\\" },
    { type: "INTRODUCER", pos: 378, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 380, raw: "4;1" },
    { type: "FINAL", pos: 383, raw: "H" },
    { type: "INTRODUCER", pos: 384, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 386, raw: "J" },
    { type: "INTRODUCER", pos: 387, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 389, raw: "24;1" },
    { type: "FINAL", pos: 393, raw: "H" },
    {
      type: "TEXT",
      pos: 394,
      raw: "\n\nThis file is a VT100-series Torture Test.  It demonstrates all the visual\nattributes of the VT100 terminal.\n\nThe top line is double-width/single-height with inverse-video line-drawing\ncharacters.  The 2nd and 3rd lines are double-width/double-height in bold\ninverse video.  They also show the limited scrolling region.\n\nThe remaining lines will show NORMAL, BOLD, BLINK, INVERSE, and all 16\ncombinations of those 4 attributes.  They show that there is a difference\nbetween an underscore character and the underline attribute, and that\nlower-case decenders go below the underline.\n\nA window pane is drawn in the lower right to show how the line-drawing set\ncan be used.  At the lower left is the character set double-wide/double-high\nto show the dot-matrix used.  Upper-case characters are 8 by 7 in a 10 by 10\ncharacter cell, with 1 blank row on top and 2 on the bottom.  The underline\nattribute uses the first bottom blank row, lower-case decenders use both.\n\n\n\n",
    },
    { type: "INTRODUCER", pos: 1359, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1361, raw: "0" },
    { type: "FINAL", pos: 1362, raw: "m" },
    { type: "TEXT", pos: 1363, raw: "This is a normal line __________________________________________________y_\n" },
    { type: "INTRODUCER", pos: 1438, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1440, raw: "1" },
    { type: "FINAL", pos: 1441, raw: "m" },
    { type: "TEXT", pos: 1442, raw: "This is a bold line (normal unless the Advanced Video Option is installed)\n" },
    { type: "INTRODUCER", pos: 1517, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1519, raw: "0;4" },
    { type: "FINAL", pos: 1522, raw: "m" },
    { type: "TEXT", pos: 1523, raw: 'This line is underlined _ "       "       "       "       "       "    _y_\n' },
    { type: "INTRODUCER", pos: 1598, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1600, raw: "0;5" },
    { type: "FINAL", pos: 1603, raw: "m" },
    { type: "TEXT", pos: 1604, raw: 'This is a blinking line _ "       "       "       "       "       "    _y_\n' },
    { type: "INTRODUCER", pos: 1679, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1681, raw: "0;7" },
    { type: "FINAL", pos: 1684, raw: "m" },
    { type: "TEXT", pos: 1685, raw: "This is inverse video _ (underlined if no AVO and cursor is underline) _y_\n" },
    { type: "INTRODUCER", pos: 1760, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1762, raw: "0" },
    { type: "FINAL", pos: 1763, raw: "m" },
    { type: "TEXT", pos: 1764, raw: "Normal gjpqy " },
    { type: "INTRODUCER", pos: 1777, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1779, raw: "4" },
    { type: "FINAL", pos: 1780, raw: "m" },
    { type: "TEXT", pos: 1781, raw: "Underline" },
    { type: "INTRODUCER", pos: 1790, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1792, raw: "0;0" },
    { type: "FINAL", pos: 1795, raw: "m" },
    { type: "TEXT", pos: 1796, raw: "  " },
    { type: "INTRODUCER", pos: 1798, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1800, raw: "5" },
    { type: "FINAL", pos: 1801, raw: "m" },
    { type: "TEXT", pos: 1802, raw: " Blink   " },
    { type: "INTRODUCER", pos: 1811, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1813, raw: "4" },
    { type: "FINAL", pos: 1814, raw: "m" },
    { type: "TEXT", pos: 1815, raw: "Underline+Blink gjpqy" },
    { type: "INTRODUCER", pos: 1836, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1838, raw: "0" },
    { type: "FINAL", pos: 1839, raw: "m" },
    { type: "TEXT", pos: 1840, raw: "\n" },
    { type: "INTRODUCER", pos: 1841, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1843, raw: "1" },
    { type: "FINAL", pos: 1844, raw: "m" },
    { type: "TEXT", pos: 1845, raw: "Bold   gjpqy " },
    { type: "INTRODUCER", pos: 1858, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1860, raw: "4" },
    { type: "FINAL", pos: 1861, raw: "m" },
    { type: "TEXT", pos: 1862, raw: "Underline" },
    { type: "INTRODUCER", pos: 1871, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1873, raw: "0;1" },
    { type: "FINAL", pos: 1876, raw: "m" },
    { type: "TEXT", pos: 1877, raw: "  " },
    { type: "INTRODUCER", pos: 1879, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1881, raw: "5" },
    { type: "FINAL", pos: 1882, raw: "m" },
    { type: "TEXT", pos: 1883, raw: " Blink   " },
    { type: "INTRODUCER", pos: 1892, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1894, raw: "4" },
    { type: "FINAL", pos: 1895, raw: "m" },
    { type: "TEXT", pos: 1896, raw: "Underline+Blink gjpqy" },
    { type: "INTRODUCER", pos: 1917, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1919, raw: "0" },
    { type: "FINAL", pos: 1920, raw: "m" },
    { type: "TEXT", pos: 1921, raw: "\n" },
    { type: "INTRODUCER", pos: 1922, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1924, raw: "7" },
    { type: "FINAL", pos: 1925, raw: "m" },
    { type: "TEXT", pos: 1926, raw: "Inverse      " },
    { type: "INTRODUCER", pos: 1939, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1941, raw: "4" },
    { type: "FINAL", pos: 1942, raw: "m" },
    { type: "TEXT", pos: 1943, raw: "Underline" },
    { type: "INTRODUCER", pos: 1952, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1954, raw: "0;7" },
    { type: "FINAL", pos: 1957, raw: "m" },
    { type: "TEXT", pos: 1958, raw: "  " },
    { type: "INTRODUCER", pos: 1960, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1962, raw: "5" },
    { type: "FINAL", pos: 1963, raw: "m" },
    { type: "TEXT", pos: 1964, raw: " Blink   " },
    { type: "INTRODUCER", pos: 1973, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1975, raw: "4" },
    { type: "FINAL", pos: 1976, raw: "m" },
    { type: "TEXT", pos: 1977, raw: "Underline+Blink" },
    { type: "INTRODUCER", pos: 1992, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 1994, raw: "0;7" },
    { type: "FINAL", pos: 1997, raw: "m" },
    { type: "TEXT", pos: 1998, raw: "\n" },
    { type: "INTRODUCER", pos: 1999, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2001, raw: "1" },
    { type: "FINAL", pos: 2002, raw: "m" },
    { type: "TEXT", pos: 2003, raw: "Bold+Inverse " },
    { type: "INTRODUCER", pos: 2016, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2018, raw: "4" },
    { type: "FINAL", pos: 2019, raw: "m" },
    { type: "TEXT", pos: 2020, raw: "Underline" },
    { type: "INTRODUCER", pos: 2029, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2031, raw: "0;1;7" },
    { type: "FINAL", pos: 2036, raw: "m" },
    { type: "TEXT", pos: 2037, raw: "  " },
    { type: "INTRODUCER", pos: 2039, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2041, raw: "5" },
    { type: "FINAL", pos: 2042, raw: "m" },
    { type: "TEXT", pos: 2043, raw: " Blink   " },
    { type: "INTRODUCER", pos: 2052, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2054, raw: "4" },
    { type: "FINAL", pos: 2055, raw: "m" },
    { type: "TEXT", pos: 2056, raw: "Underline+Blink" },
    { type: "INTRODUCER", pos: 2071, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2073, raw: "0" },
    { type: "FINAL", pos: 2074, raw: "m" },
    { type: "TEXT", pos: 2075, raw: "\n" },
    { type: "INTRODUCER", pos: 2076, raw: "\u001bP", code: "P" },
    { type: "DATA", pos: 2078, raw: "rEM1" },
    { type: "FINAL", pos: 2082, raw: "\u001b\\" },
    { type: "INTRODUCER", pos: 2084, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2086, raw: "A" },
    { type: "TEXT", pos: 2087, raw: "\n" },
    { type: "INTRODUCER", pos: 2088, raw: "\u001b#", code: "\u001b", intermediate: "#" },
    { type: "FINAL", pos: 2090, raw: "6" },
    { type: "TEXT", pos: 2091, raw: "This is double " },
    { type: "INTRODUCER", pos: 2106, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2108, raw: "1" },
    { type: "FINAL", pos: 2109, raw: "m" },
    { type: "TEXT", pos: 2110, raw: "width" },
    { type: "INTRODUCER", pos: 2115, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2117, raw: "0" },
    { type: "FINAL", pos: 2118, raw: "m" },
    { type: "TEXT", pos: 2119, raw: "\n" },
    { type: "INTRODUCER", pos: 2120, raw: "\u001b#", code: "\u001b", intermediate: "#" },
    { type: "FINAL", pos: 2122, raw: "3" },
    { type: "TEXT", pos: 2123, raw: "This is double " },
    { type: "INTRODUCER", pos: 2138, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2140, raw: "1" },
    { type: "FINAL", pos: 2141, raw: "m" },
    { type: "TEXT", pos: 2142, raw: "height" },
    { type: "INTRODUCER", pos: 2148, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2150, raw: "0" },
    { type: "FINAL", pos: 2151, raw: "m" },
    { type: "TEXT", pos: 2152, raw: "\n" },
    { type: "INTRODUCER", pos: 2153, raw: "\u001b#", code: "\u001b", intermediate: "#" },
    { type: "FINAL", pos: 2155, raw: "4" },
    { type: "TEXT", pos: 2156, raw: "This is double " },
    { type: "INTRODUCER", pos: 2171, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2173, raw: "1" },
    { type: "FINAL", pos: 2174, raw: "m" },
    { type: "TEXT", pos: 2175, raw: "height" },
    { type: "INTRODUCER", pos: 2181, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2183, raw: "0" },
    { type: "FINAL", pos: 2184, raw: "m" },
    { type: "TEXT", pos: 2185, raw: "\n" },
    { type: "INTRODUCER", pos: 2186, raw: "\u001b#", code: "\u001b", intermediate: "#" },
    { type: "FINAL", pos: 2188, raw: "6" },
    { type: "INTRODUCER", pos: 2189, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2191, raw: "7;4" },
    { type: "FINAL", pos: 2194, raw: "m" },
    { type: "TEXT", pos: 2195, raw: "_" },
    { type: "INTRODUCER", pos: 2196, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2198, raw: "0;7" },
    { type: "FINAL", pos: 2201, raw: "m" },
    { type: "TEXT", pos: 2202, raw: "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789ioy\n" },
    { type: "INTRODUCER", pos: 2242, raw: "\u001b#", code: "\u001b", intermediate: "#" },
    { type: "FINAL", pos: 2244, raw: "3" },
    { type: "INTRODUCER", pos: 2245, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2247, raw: "7;4" },
    { type: "FINAL", pos: 2250, raw: "m" },
    { type: "TEXT", pos: 2251, raw: "_" },
    { type: "INTRODUCER", pos: 2252, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2254, raw: "0;7" },
    { type: "FINAL", pos: 2257, raw: "m" },
    { type: "TEXT", pos: 2258, raw: "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789ioy\n" },
    { type: "INTRODUCER", pos: 2298, raw: "\u001b#", code: "\u001b", intermediate: "#" },
    { type: "FINAL", pos: 2300, raw: "4" },
    { type: "INTRODUCER", pos: 2301, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2303, raw: "7;4" },
    { type: "FINAL", pos: 2306, raw: "m" },
    { type: "TEXT", pos: 2307, raw: "_" },
    { type: "INTRODUCER", pos: 2308, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2310, raw: "0;7" },
    { type: "FINAL", pos: 2313, raw: "m" },
    { type: "TEXT", pos: 2314, raw: "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789ioy" },
    { type: "INTRODUCER", pos: 2353, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2355, raw: "3" },
    { type: "FINAL", pos: 2356, raw: "A" },
    { type: "TEXT", pos: 2357, raw: "\n" },
    { type: "INTRODUCER", pos: 2358, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2360, raw: "0" },
    { type: "FINAL", pos: 2361, raw: "m" },
    { type: "INTRODUCER", pos: 2362, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2364, raw: "C" },
    { type: "TEXT", pos: 2365, raw: "A" },
    { type: "INTRODUCER", pos: 2366, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2368, raw: "C" },
    { type: "TEXT", pos: 2369, raw: "C" },
    { type: "INTRODUCER", pos: 2370, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2372, raw: "C" },
    { type: "TEXT", pos: 2373, raw: "E" },
    { type: "INTRODUCER", pos: 2374, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2376, raw: "C" },
    { type: "TEXT", pos: 2377, raw: "G" },
    { type: "INTRODUCER", pos: 2378, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2380, raw: "C" },
    { type: "TEXT", pos: 2381, raw: "I" },
    { type: "INTRODUCER", pos: 2382, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2384, raw: "C" },
    { type: "TEXT", pos: 2385, raw: "K" },
    { type: "INTRODUCER", pos: 2386, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2388, raw: "C" },
    { type: "TEXT", pos: 2389, raw: "M" },
    { type: "INTRODUCER", pos: 2390, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2392, raw: "C" },
    { type: "TEXT", pos: 2393, raw: "O" },
    { type: "INTRODUCER", pos: 2394, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2396, raw: "C" },
    { type: "TEXT", pos: 2397, raw: "Q" },
    { type: "INTRODUCER", pos: 2398, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2400, raw: "C" },
    { type: "TEXT", pos: 2401, raw: "S" },
    { type: "INTRODUCER", pos: 2402, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2404, raw: "C" },
    { type: "TEXT", pos: 2405, raw: "U" },
    { type: "INTRODUCER", pos: 2406, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2408, raw: "C" },
    { type: "TEXT", pos: 2409, raw: "W" },
    { type: "INTRODUCER", pos: 2410, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2412, raw: "C" },
    { type: "TEXT", pos: 2413, raw: "Y" },
    { type: "INTRODUCER", pos: 2414, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2416, raw: "C" },
    { type: "TEXT", pos: 2417, raw: "0" },
    { type: "INTRODUCER", pos: 2418, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2420, raw: "C" },
    { type: "TEXT", pos: 2421, raw: "2" },
    { type: "INTRODUCER", pos: 2422, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2424, raw: "C" },
    { type: "TEXT", pos: 2425, raw: "4" },
    { type: "INTRODUCER", pos: 2426, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2428, raw: "C" },
    { type: "TEXT", pos: 2429, raw: "6" },
    { type: "INTRODUCER", pos: 2430, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2432, raw: "C" },
    { type: "TEXT", pos: 2433, raw: "8" },
    { type: "INTRODUCER", pos: 2434, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2436, raw: "C" },
    { type: "TEXT", pos: 2437, raw: "i" },
    { type: "INTRODUCER", pos: 2438, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2440, raw: "C" },
    { type: "TEXT", pos: 2441, raw: "y\n" },
    { type: "INTRODUCER", pos: 2443, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2445, raw: "4" },
    { type: "FINAL", pos: 2446, raw: "m" },
    { type: "TEXT", pos: 2447, raw: "_" },
    { type: "INTRODUCER", pos: 2448, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2450, raw: "0" },
    { type: "FINAL", pos: 2451, raw: "m" },
    { type: "INTRODUCER", pos: 2452, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2454, raw: "C" },
    { type: "TEXT", pos: 2455, raw: "B" },
    { type: "INTRODUCER", pos: 2456, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2458, raw: "C" },
    { type: "TEXT", pos: 2459, raw: "D" },
    { type: "INTRODUCER", pos: 2460, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2462, raw: "C" },
    { type: "TEXT", pos: 2463, raw: "F" },
    { type: "INTRODUCER", pos: 2464, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2466, raw: "C" },
    { type: "TEXT", pos: 2467, raw: "H" },
    { type: "INTRODUCER", pos: 2468, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2470, raw: "C" },
    { type: "TEXT", pos: 2471, raw: "J" },
    { type: "INTRODUCER", pos: 2472, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2474, raw: "C" },
    { type: "TEXT", pos: 2475, raw: "L" },
    { type: "INTRODUCER", pos: 2476, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2478, raw: "C" },
    { type: "TEXT", pos: 2479, raw: "N" },
    { type: "INTRODUCER", pos: 2480, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2482, raw: "C" },
    { type: "TEXT", pos: 2483, raw: "P" },
    { type: "INTRODUCER", pos: 2484, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2486, raw: "C" },
    { type: "TEXT", pos: 2487, raw: "R" },
    { type: "INTRODUCER", pos: 2488, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2490, raw: "C" },
    { type: "TEXT", pos: 2491, raw: "T" },
    { type: "INTRODUCER", pos: 2492, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2494, raw: "C" },
    { type: "TEXT", pos: 2495, raw: "V" },
    { type: "INTRODUCER", pos: 2496, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2498, raw: "C" },
    { type: "TEXT", pos: 2499, raw: "X" },
    { type: "INTRODUCER", pos: 2500, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2502, raw: "C" },
    { type: "TEXT", pos: 2503, raw: "Z" },
    { type: "INTRODUCER", pos: 2504, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2506, raw: "C" },
    { type: "TEXT", pos: 2507, raw: "1" },
    { type: "INTRODUCER", pos: 2508, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2510, raw: "C" },
    { type: "TEXT", pos: 2511, raw: "3" },
    { type: "INTRODUCER", pos: 2512, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2514, raw: "C" },
    { type: "TEXT", pos: 2515, raw: "5" },
    { type: "INTRODUCER", pos: 2516, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2518, raw: "C" },
    { type: "TEXT", pos: 2519, raw: "7" },
    { type: "INTRODUCER", pos: 2520, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2522, raw: "C" },
    { type: "TEXT", pos: 2523, raw: "9" },
    { type: "INTRODUCER", pos: 2524, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2526, raw: "C" },
    { type: "TEXT", pos: 2527, raw: "o\n" },
    { type: "INTRODUCER", pos: 2529, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2531, raw: "4" },
    { type: "FINAL", pos: 2532, raw: "m" },
    { type: "TEXT", pos: 2533, raw: "_" },
    { type: "INTRODUCER", pos: 2534, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2536, raw: "0" },
    { type: "FINAL", pos: 2537, raw: "m" },
    { type: "INTRODUCER", pos: 2538, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2540, raw: "C" },
    { type: "TEXT", pos: 2541, raw: "B" },
    { type: "INTRODUCER", pos: 2542, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2544, raw: "C" },
    { type: "TEXT", pos: 2545, raw: "D" },
    { type: "INTRODUCER", pos: 2546, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2548, raw: "C" },
    { type: "TEXT", pos: 2549, raw: "F" },
    { type: "INTRODUCER", pos: 2550, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2552, raw: "C" },
    { type: "TEXT", pos: 2553, raw: "H" },
    { type: "INTRODUCER", pos: 2554, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2556, raw: "C" },
    { type: "TEXT", pos: 2557, raw: "J" },
    { type: "INTRODUCER", pos: 2558, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2560, raw: "C" },
    { type: "TEXT", pos: 2561, raw: "L" },
    { type: "INTRODUCER", pos: 2562, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2564, raw: "C" },
    { type: "TEXT", pos: 2565, raw: "N" },
    { type: "INTRODUCER", pos: 2566, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2568, raw: "C" },
    { type: "TEXT", pos: 2569, raw: "P" },
    { type: "INTRODUCER", pos: 2570, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2572, raw: "C" },
    { type: "TEXT", pos: 2573, raw: "R" },
    { type: "INTRODUCER", pos: 2574, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2576, raw: "C" },
    { type: "TEXT", pos: 2577, raw: "T" },
    { type: "INTRODUCER", pos: 2578, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2580, raw: "C" },
    { type: "TEXT", pos: 2581, raw: "V" },
    { type: "INTRODUCER", pos: 2582, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2584, raw: "C" },
    { type: "TEXT", pos: 2585, raw: "X" },
    { type: "INTRODUCER", pos: 2586, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2588, raw: "C" },
    { type: "TEXT", pos: 2589, raw: "Z" },
    { type: "INTRODUCER", pos: 2590, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2592, raw: "C" },
    { type: "TEXT", pos: 2593, raw: "1" },
    { type: "INTRODUCER", pos: 2594, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2596, raw: "C" },
    { type: "TEXT", pos: 2597, raw: "3" },
    { type: "INTRODUCER", pos: 2598, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2600, raw: "C" },
    { type: "TEXT", pos: 2601, raw: "5" },
    { type: "INTRODUCER", pos: 2602, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2604, raw: "C" },
    { type: "TEXT", pos: 2605, raw: "7" },
    { type: "INTRODUCER", pos: 2606, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2608, raw: "C" },
    { type: "TEXT", pos: 2609, raw: "9" },
    { type: "INTRODUCER", pos: 2610, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2612, raw: "C" },
    { type: "TEXT", pos: 2613, raw: "o\n" },
    { type: "INTRODUCER", pos: 2615, raw: "\u001b(", code: "\u001b", intermediate: "(" },
    { type: "FINAL", pos: 2617, raw: "0" },
    { type: "INTRODUCER", pos: 2618, raw: "\u001b#", code: "\u001b", intermediate: "#" },
    { type: "FINAL", pos: 2620, raw: "6" },
    { type: "INTRODUCER", pos: 2621, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2623, raw: "7" },
    { type: "FINAL", pos: 2624, raw: "m" },
    { type: "TEXT", pos: 2625, raw: "`abcdefghijklmnopqrstuvwxyz{|}~" },
    { type: "INTRODUCER", pos: 2656, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2658, raw: "0" },
    { type: "FINAL", pos: 2659, raw: "m" },
    { type: "TEXT", pos: 2660, raw: " lqwqk\n" },
    { type: "INTRODUCER", pos: 2667, raw: "\u001b#", code: "\u001b", intermediate: "#" },
    { type: "FINAL", pos: 2669, raw: "3" },
    { type: "INTRODUCER", pos: 2670, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2672, raw: "7" },
    { type: "FINAL", pos: 2673, raw: "m" },
    { type: "TEXT", pos: 2674, raw: "`abcdefghijklmnopqrstuvwxyz{|}~" },
    { type: "INTRODUCER", pos: 2705, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2707, raw: "0" },
    { type: "FINAL", pos: 2708, raw: "m" },
    { type: "TEXT", pos: 2709, raw: " tqnqu\n" },
    { type: "INTRODUCER", pos: 2716, raw: "\u001b#", code: "\u001b", intermediate: "#" },
    { type: "FINAL", pos: 2718, raw: "4" },
    { type: "INTRODUCER", pos: 2719, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2721, raw: "7" },
    { type: "FINAL", pos: 2722, raw: "m" },
    { type: "TEXT", pos: 2723, raw: "`abcdefghijklmnopqrstuvwxyz{|}~" },
    { type: "INTRODUCER", pos: 2754, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2756, raw: "0" },
    { type: "FINAL", pos: 2757, raw: "m" },
    { type: "TEXT", pos: 2758, raw: " tqnqu" },
    { type: "INTRODUCER", pos: 2764, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2766, raw: "3" },
    { type: "FINAL", pos: 2767, raw: "A" },
    { type: "INTRODUCER", pos: 2768, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2770, raw: "0" },
    { type: "FINAL", pos: 2771, raw: "m" },
    { type: "TEXT", pos: 2772, raw: "\n" },
    { type: "INTRODUCER", pos: 2773, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2775, raw: "C" },
    { type: "TEXT", pos: 2776, raw: "a" },
    { type: "INTRODUCER", pos: 2777, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2779, raw: "C" },
    { type: "TEXT", pos: 2780, raw: "c" },
    { type: "INTRODUCER", pos: 2781, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2783, raw: "C" },
    { type: "TEXT", pos: 2784, raw: "e" },
    { type: "INTRODUCER", pos: 2785, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2787, raw: "C" },
    { type: "TEXT", pos: 2788, raw: "g" },
    { type: "INTRODUCER", pos: 2789, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2791, raw: "C" },
    { type: "TEXT", pos: 2792, raw: "i" },
    { type: "INTRODUCER", pos: 2793, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2795, raw: "C" },
    { type: "TEXT", pos: 2796, raw: "k" },
    { type: "INTRODUCER", pos: 2797, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2799, raw: "C" },
    { type: "TEXT", pos: 2800, raw: "m" },
    { type: "INTRODUCER", pos: 2801, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2803, raw: "C" },
    { type: "TEXT", pos: 2804, raw: "o" },
    { type: "INTRODUCER", pos: 2805, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2807, raw: "C" },
    { type: "TEXT", pos: 2808, raw: "q" },
    { type: "INTRODUCER", pos: 2809, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2811, raw: "C" },
    { type: "TEXT", pos: 2812, raw: "s" },
    { type: "INTRODUCER", pos: 2813, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2815, raw: "C" },
    { type: "TEXT", pos: 2816, raw: "u" },
    { type: "INTRODUCER", pos: 2817, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2819, raw: "C" },
    { type: "TEXT", pos: 2820, raw: "w" },
    { type: "INTRODUCER", pos: 2821, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2823, raw: "C" },
    { type: "TEXT", pos: 2824, raw: "y" },
    { type: "INTRODUCER", pos: 2825, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2827, raw: "C" },
    { type: "TEXT", pos: 2828, raw: "{" },
    { type: "INTRODUCER", pos: 2829, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2831, raw: "C" },
    { type: "TEXT", pos: 2832, raw: "}\n`" },
    { type: "INTRODUCER", pos: 2835, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2837, raw: "C" },
    { type: "TEXT", pos: 2838, raw: "b" },
    { type: "INTRODUCER", pos: 2839, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2841, raw: "C" },
    { type: "TEXT", pos: 2842, raw: "d" },
    { type: "INTRODUCER", pos: 2843, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2845, raw: "C" },
    { type: "TEXT", pos: 2846, raw: "f" },
    { type: "INTRODUCER", pos: 2847, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2849, raw: "C" },
    { type: "TEXT", pos: 2850, raw: "h" },
    { type: "INTRODUCER", pos: 2851, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2853, raw: "C" },
    { type: "TEXT", pos: 2854, raw: "j" },
    { type: "INTRODUCER", pos: 2855, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2857, raw: "C" },
    { type: "TEXT", pos: 2858, raw: "l" },
    { type: "INTRODUCER", pos: 2859, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2861, raw: "C" },
    { type: "TEXT", pos: 2862, raw: "n" },
    { type: "INTRODUCER", pos: 2863, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2865, raw: "C" },
    { type: "TEXT", pos: 2866, raw: "p" },
    { type: "INTRODUCER", pos: 2867, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2869, raw: "C" },
    { type: "TEXT", pos: 2870, raw: "r" },
    { type: "INTRODUCER", pos: 2871, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2873, raw: "C" },
    { type: "TEXT", pos: 2874, raw: "t" },
    { type: "INTRODUCER", pos: 2875, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2877, raw: "C" },
    { type: "TEXT", pos: 2878, raw: "v" },
    { type: "INTRODUCER", pos: 2879, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2881, raw: "C" },
    { type: "TEXT", pos: 2882, raw: "x" },
    { type: "INTRODUCER", pos: 2883, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2885, raw: "C" },
    { type: "TEXT", pos: 2886, raw: "z" },
    { type: "INTRODUCER", pos: 2887, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2889, raw: "C" },
    { type: "TEXT", pos: 2890, raw: "|" },
    { type: "INTRODUCER", pos: 2891, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2893, raw: "C" },
    { type: "TEXT", pos: 2894, raw: "~\n`" },
    { type: "INTRODUCER", pos: 2897, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2899, raw: "C" },
    { type: "TEXT", pos: 2900, raw: "b" },
    { type: "INTRODUCER", pos: 2901, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2903, raw: "C" },
    { type: "TEXT", pos: 2904, raw: "d" },
    { type: "INTRODUCER", pos: 2905, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2907, raw: "C" },
    { type: "TEXT", pos: 2908, raw: "f" },
    { type: "INTRODUCER", pos: 2909, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2911, raw: "C" },
    { type: "TEXT", pos: 2912, raw: "h" },
    { type: "INTRODUCER", pos: 2913, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2915, raw: "C" },
    { type: "TEXT", pos: 2916, raw: "j" },
    { type: "INTRODUCER", pos: 2917, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2919, raw: "C" },
    { type: "TEXT", pos: 2920, raw: "l" },
    { type: "INTRODUCER", pos: 2921, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2923, raw: "C" },
    { type: "TEXT", pos: 2924, raw: "n" },
    { type: "INTRODUCER", pos: 2925, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2927, raw: "C" },
    { type: "TEXT", pos: 2928, raw: "p" },
    { type: "INTRODUCER", pos: 2929, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2931, raw: "C" },
    { type: "TEXT", pos: 2932, raw: "r" },
    { type: "INTRODUCER", pos: 2933, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2935, raw: "C" },
    { type: "TEXT", pos: 2936, raw: "t" },
    { type: "INTRODUCER", pos: 2937, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2939, raw: "C" },
    { type: "TEXT", pos: 2940, raw: "v" },
    { type: "INTRODUCER", pos: 2941, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2943, raw: "C" },
    { type: "TEXT", pos: 2944, raw: "x" },
    { type: "INTRODUCER", pos: 2945, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2947, raw: "C" },
    { type: "TEXT", pos: 2948, raw: "z" },
    { type: "INTRODUCER", pos: 2949, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2951, raw: "C" },
    { type: "TEXT", pos: 2952, raw: "|" },
    { type: "INTRODUCER", pos: 2953, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 2955, raw: "C" },
    { type: "TEXT", pos: 2956, raw: "~" },
    { type: "INTRODUCER", pos: 2957, raw: "\u001b(", code: "\u001b", intermediate: "(" },
    { type: "FINAL", pos: 2959, raw: "B" },
    { type: "TEXT", pos: 2960, raw: "\n" },
    { type: "INTRODUCER", pos: 2961, raw: "\u001b#", code: "\u001b", intermediate: "#" },
    { type: "FINAL", pos: 2963, raw: "6" },
    { type: "INTRODUCER", pos: 2964, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 2966, raw: "7" },
    { type: "FINAL", pos: 2967, raw: "m" },
    { type: "TEXT", pos: 2968, raw: "`abcdefghijklmnopqrstuvwxyz{|}~" },
    { type: "INTRODUCER", pos: 2999, raw: "\u001b(", code: "\u001b", intermediate: "(" },
    { type: "FINAL", pos: 3001, raw: "0" },
    { type: "INTRODUCER", pos: 3002, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 3004, raw: "0" },
    { type: "FINAL", pos: 3005, raw: "m" },
    { type: "TEXT", pos: 3006, raw: " mqvqj" },
    { type: "INTRODUCER", pos: 3012, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 3014, raw: "A" },
    { type: "INTRODUCER", pos: 3015, raw: "\u001b(", code: "\u001b", intermediate: "(" },
    { type: "FINAL", pos: 3017, raw: "B" },
    { type: "TEXT", pos: 3018, raw: "\n" },
    { type: "INTRODUCER", pos: 3019, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 3021, raw: "0" },
    { type: "FINAL", pos: 3022, raw: "m" },
    { type: "INTRODUCER", pos: 3023, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 3025, raw: "C" },
    { type: "TEXT", pos: 3026, raw: "a" },
    { type: "INTRODUCER", pos: 3027, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 3029, raw: "C" },
    { type: "TEXT", pos: 3030, raw: "c" },
    { type: "INTRODUCER", pos: 3031, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 3033, raw: "C" },
    { type: "TEXT", pos: 3034, raw: "e" },
    { type: "INTRODUCER", pos: 3035, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 3037, raw: "C" },
    { type: "TEXT", pos: 3038, raw: "g" },
    { type: "INTRODUCER", pos: 3039, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 3041, raw: "C" },
    { type: "TEXT", pos: 3042, raw: "i" },
    { type: "INTRODUCER", pos: 3043, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 3045, raw: "C" },
    { type: "TEXT", pos: 3046, raw: "k" },
    { type: "INTRODUCER", pos: 3047, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 3049, raw: "C" },
    { type: "TEXT", pos: 3050, raw: "m" },
    { type: "INTRODUCER", pos: 3051, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 3053, raw: "C" },
    { type: "TEXT", pos: 3054, raw: "o" },
    { type: "INTRODUCER", pos: 3055, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 3057, raw: "C" },
    { type: "TEXT", pos: 3058, raw: "q" },
    { type: "INTRODUCER", pos: 3059, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 3061, raw: "C" },
    { type: "TEXT", pos: 3062, raw: "s" },
    { type: "INTRODUCER", pos: 3063, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 3065, raw: "C" },
    { type: "TEXT", pos: 3066, raw: "u" },
    { type: "INTRODUCER", pos: 3067, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 3069, raw: "C" },
    { type: "TEXT", pos: 3070, raw: "w" },
    { type: "INTRODUCER", pos: 3071, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 3073, raw: "C" },
    { type: "TEXT", pos: 3074, raw: "y" },
    { type: "INTRODUCER", pos: 3075, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 3077, raw: "C" },
    { type: "TEXT", pos: 3078, raw: "{" },
    { type: "INTRODUCER", pos: 3079, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 3081, raw: "C" },
    { type: "TEXT", pos: 3082, raw: "}\n" },
    { type: "INTRODUCER", pos: 3084, raw: "\u001bP", code: "P" },
    { type: "DATA", pos: 3086, raw: "rEM0" },
    { type: "FINAL", pos: 3090, raw: "\u001b\\" },
    { type: "TEXT", pos: 3092, raw: " $PrEM0 works on GIGI " },
    { type: "INTRODUCER", pos: 3114, raw: "\u001b[", code: "\u009b" },
    { type: "FINAL", pos: 3116, raw: "A" },
    { type: "INTRODUCER", pos: 3117, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 3119, raw: "1;7" },
    { type: "FINAL", pos: 3122, raw: "m" },
    { type: "TEXT", pos: 3123, raw: "\n   This test created by Joe Smith, 8-May-85   " },
    { type: "INTRODUCER", pos: 3170, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 3172, raw: "0" },
    { type: "FINAL", pos: 3173, raw: "m" },
    { type: "TEXT", pos: 3174, raw: "\n" },
    { type: "INTRODUCER", pos: 3175, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 3177, raw: "1;" },
    { type: "FINAL", pos: 3179, raw: "r" },
    { type: "INTRODUCER", pos: 3180, raw: "\u001b[", code: "\u009b" },
    { type: "DATA", pos: 3182, raw: "22;1" },
    { type: "FINAL", pos: 3186, raw: "H" },
    { type: "TEXT", pos: 3187, raw: "\n\n" },
  ];

  assert.deepEqual(actual, expected, "All tokens should match exactly");
});

test("VT100 torture test (parse)", () => {
  const actual = parse(content);

  const expected = [
    { type: "ESC", pos: 0, command: "\\", params: [], raw: "\u001b\\" },
    { type: "ESC", pos: 2, command: "<", params: [], raw: "\u001b<" },
    { type: "ESC", pos: 4, command: ">", params: [], raw: "\u001b>" },
    { type: "CSI", pos: 6, command: "H", params: [], raw: "\u001b[H" },
    { type: "CSI", pos: 9, command: "q", params: ["1", "2", "3", "4"], raw: "\u001b[1;2;3;4q" },
    { type: "DCS", pos: 19, command: "", params: ["rEM1"], raw: "\u001bPrEM1\u001b\\" },
    { type: "DEC", pos: 27, command: "h", params: ["4"], raw: "\u001b[?4h" },
    { type: "CSI", pos: 32, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "TEXT", pos: 36, raw: "\u000a" },
    { type: "CSI", pos: 37, command: "H", params: [], raw: "\u001b[H" },
    { type: "CSI", pos: 40, command: "J", params: [], raw: "\u001b[J" },
    { type: "CSI", pos: 43, command: "m", params: ["7"], raw: "\u001b[7m" },
    { type: "ESC", pos: 47, command: "#", params: ["6"], raw: "\u001b#6" },
    { type: "ESC", pos: 50, command: "(", params: ["0"], raw: "\u001b(0" },
    { type: "TEXT", pos: 53, raw: "a`opqrs`" },
    { type: "ESC", pos: 61, command: "(", params: ["B"], raw: "\u001b(B" },
    { type: "TEXT", pos: 64, raw: "      This is the       " },
    { type: "ESC", pos: 88, command: "(", params: ["0"], raw: "\u001b(0" },
    { type: "TEXT", pos: 91, raw: "`srqpo`a" },
    { type: "ESC", pos: 99, command: "(", params: ["B"], raw: "\u001b(B" },
    { type: "CSI", pos: 102, command: "m", params: ["1"], raw: "\u001b[1m" },
    { type: "TEXT", pos: 106, raw: "\u000a" },
    { type: "ESC", pos: 107, command: "#", params: ["3"], raw: "\u001b#3" },
    { type: "TEXT", pos: 110, raw: "VT100 series Torture Test Demonstration.\u000a" },
    { type: "ESC", pos: 151, command: "#", params: ["4"], raw: "\u001b#4" },
    { type: "TEXT", pos: 154, raw: "VT100 series Torture Test Demonstration.\u000a" },
    { type: "ESC", pos: 195, command: "#", params: ["6"], raw: "\u001b#6" },
    { type: "CSI", pos: 198, command: "m", params: ["1", "5"], raw: "\u001b[1;5m" },
    { type: "TEXT", pos: 204, raw: "       Watch the blinking lights        " },
    { type: "CSI", pos: 244, command: "r", params: ["4", "24"], raw: "\u001b[4;24r" },
    { type: "CSI", pos: 251, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "TEXT", pos: 255, raw: "\u000a\u0007" },
    { type: "CSI", pos: 257, command: "q", params: ["0"], raw: "\u001b[0q" },
    { type: "CSI", pos: 261, command: "q", params: ["1"], raw: "\u001b[1q" },
    { type: "CSI", pos: 265, command: "q", params: ["0"], raw: "\u001b[0q" },
    { type: "CSI", pos: 269, command: "q", params: ["2"], raw: "\u001b[2q" },
    { type: "CSI", pos: 273, command: "q", params: ["0"], raw: "\u001b[0q" },
    { type: "CSI", pos: 277, command: "q", params: ["3"], raw: "\u001b[3q" },
    { type: "CSI", pos: 281, command: "q", params: ["0"], raw: "\u001b[0q" },
    { type: "CSI", pos: 285, command: "q", params: ["4"], raw: "\u001b[4q" },
    { type: "CSI", pos: 289, command: "q", params: ["0"], raw: "\u001b[0q" },
    { type: "TEXT", pos: 293, raw: "\u000a\u0007" },
    { type: "CSI", pos: 295, command: "q", params: ["0"], raw: "\u001b[0q" },
    { type: "CSI", pos: 299, command: "q", params: ["1"], raw: "\u001b[1q" },
    { type: "CSI", pos: 303, command: "q", params: ["0"], raw: "\u001b[0q" },
    { type: "CSI", pos: 307, command: "q", params: ["2"], raw: "\u001b[2q" },
    { type: "CSI", pos: 311, command: "q", params: ["0"], raw: "\u001b[0q" },
    { type: "CSI", pos: 315, command: "q", params: ["3"], raw: "\u001b[3q" },
    { type: "CSI", pos: 319, command: "q", params: ["0"], raw: "\u001b[0q" },
    { type: "CSI", pos: 323, command: "q", params: ["4"], raw: "\u001b[4q" },
    { type: "CSI", pos: 327, command: "q", params: ["0"], raw: "\u001b[0q" },
    { type: "TEXT", pos: 331, raw: "\u000a\u0007" },
    { type: "CSI", pos: 333, command: "q", params: ["0"], raw: "\u001b[0q" },
    { type: "CSI", pos: 337, command: "q", params: ["1"], raw: "\u001b[1q" },
    { type: "CSI", pos: 341, command: "q", params: ["0"], raw: "\u001b[0q" },
    { type: "CSI", pos: 345, command: "q", params: ["2"], raw: "\u001b[2q" },
    { type: "CSI", pos: 349, command: "q", params: ["0"], raw: "\u001b[0q" },
    { type: "CSI", pos: 353, command: "q", params: ["3"], raw: "\u001b[3q" },
    { type: "CSI", pos: 357, command: "q", params: ["0"], raw: "\u001b[0q" },
    { type: "CSI", pos: 361, command: "q", params: ["4"], raw: "\u001b[4q" },
    { type: "CSI", pos: 365, command: "q", params: ["0"], raw: "\u001b[0q" },
    { type: "TEXT", pos: 369, raw: "\u000a" },
    { type: "DCS", pos: 370, command: "", params: ["rEM0"], raw: "\u001bPrEM0\u001b\\" },
    { type: "CSI", pos: 378, command: "H", params: ["4", "1"], raw: "\u001b[4;1H" },
    { type: "CSI", pos: 384, command: "J", params: [], raw: "\u001b[J" },
    { type: "CSI", pos: 387, command: "H", params: ["24", "1"], raw: "\u001b[24;1H" },
    {
      type: "TEXT",
      pos: 394,
      raw: "\u000a\u000aThis file is a VT100-series Torture Test.  It demonstrates all the visual\u000aattributes of the VT100 terminal.\u000a\u000aThe top line is double-width/single-height with inverse-video line-drawing\u000acharacters.  The 2nd and 3rd lines are double-width/double-height in bold\u000ainverse video.  They also show the limited scrolling region.\u000a\u000aThe remaining lines will show NORMAL, BOLD, BLINK, INVERSE, and all 16\u000acombinations of those 4 attributes.  They show that there is a difference\u000abetween an underscore character and the underline attribute, and that\u000alower-case decenders go below the underline.\u000a\u000aA window pane is drawn in the lower right to show how the line-drawing set\u000acan be used.  At the lower left is the character set double-wide/double-high\u000ato show the dot-matrix used.  Upper-case characters are 8 by 7 in a 10 by 10\u000acharacter cell, with 1 blank row on top and 2 on the bottom.  The underline\u000aattribute uses the first bottom blank row, lower-case decenders use both.\u000a\u000a\u000a\u000a",
    },
    { type: "CSI", pos: 1359, command: "m", params: ["0"], raw: "\u001b[0m" },
    {
      type: "TEXT",
      pos: 1363,
      raw: "This is a normal line __________________________________________________y_\u000a",
    },
    { type: "CSI", pos: 1438, command: "m", params: ["1"], raw: "\u001b[1m" },
    {
      type: "TEXT",
      pos: 1442,
      raw: "This is a bold line (normal unless the Advanced Video Option is installed)\u000a",
    },
    { type: "CSI", pos: 1517, command: "m", params: ["0", "4"], raw: "\u001b[0;4m" },
    {
      type: "TEXT",
      pos: 1523,
      raw: 'This line is underlined _ "       "       "       "       "       "    _y_\u000a',
    },
    { type: "CSI", pos: 1598, command: "m", params: ["0", "5"], raw: "\u001b[0;5m" },
    {
      type: "TEXT",
      pos: 1604,
      raw: 'This is a blinking line _ "       "       "       "       "       "    _y_\u000a',
    },
    { type: "CSI", pos: 1679, command: "m", params: ["0", "7"], raw: "\u001b[0;7m" },
    {
      type: "TEXT",
      pos: 1685,
      raw: "This is inverse video _ (underlined if no AVO and cursor is underline) _y_\u000a",
    },
    { type: "CSI", pos: 1760, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "TEXT", pos: 1764, raw: "Normal gjpqy " },
    { type: "CSI", pos: 1777, command: "m", params: ["4"], raw: "\u001b[4m" },
    { type: "TEXT", pos: 1781, raw: "Underline" },
    { type: "CSI", pos: 1790, command: "m", params: ["0", "0"], raw: "\u001b[0;0m" },
    { type: "TEXT", pos: 1796, raw: "  " },
    { type: "CSI", pos: 1798, command: "m", params: ["5"], raw: "\u001b[5m" },
    { type: "TEXT", pos: 1802, raw: " Blink   " },
    { type: "CSI", pos: 1811, command: "m", params: ["4"], raw: "\u001b[4m" },
    { type: "TEXT", pos: 1815, raw: "Underline+Blink gjpqy" },
    { type: "CSI", pos: 1836, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "TEXT", pos: 1840, raw: "\u000a" },
    { type: "CSI", pos: 1841, command: "m", params: ["1"], raw: "\u001b[1m" },
    { type: "TEXT", pos: 1845, raw: "Bold   gjpqy " },
    { type: "CSI", pos: 1858, command: "m", params: ["4"], raw: "\u001b[4m" },
    { type: "TEXT", pos: 1862, raw: "Underline" },
    { type: "CSI", pos: 1871, command: "m", params: ["0", "1"], raw: "\u001b[0;1m" },
    { type: "TEXT", pos: 1877, raw: "  " },
    { type: "CSI", pos: 1879, command: "m", params: ["5"], raw: "\u001b[5m" },
    { type: "TEXT", pos: 1883, raw: " Blink   " },
    { type: "CSI", pos: 1892, command: "m", params: ["4"], raw: "\u001b[4m" },
    { type: "TEXT", pos: 1896, raw: "Underline+Blink gjpqy" },
    { type: "CSI", pos: 1917, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "TEXT", pos: 1921, raw: "\u000a" },
    { type: "CSI", pos: 1922, command: "m", params: ["7"], raw: "\u001b[7m" },
    { type: "TEXT", pos: 1926, raw: "Inverse      " },
    { type: "CSI", pos: 1939, command: "m", params: ["4"], raw: "\u001b[4m" },
    { type: "TEXT", pos: 1943, raw: "Underline" },
    { type: "CSI", pos: 1952, command: "m", params: ["0", "7"], raw: "\u001b[0;7m" },
    { type: "TEXT", pos: 1958, raw: "  " },
    { type: "CSI", pos: 1960, command: "m", params: ["5"], raw: "\u001b[5m" },
    { type: "TEXT", pos: 1964, raw: " Blink   " },
    { type: "CSI", pos: 1973, command: "m", params: ["4"], raw: "\u001b[4m" },
    { type: "TEXT", pos: 1977, raw: "Underline+Blink" },
    { type: "CSI", pos: 1992, command: "m", params: ["0", "7"], raw: "\u001b[0;7m" },
    { type: "TEXT", pos: 1998, raw: "\u000a" },
    { type: "CSI", pos: 1999, command: "m", params: ["1"], raw: "\u001b[1m" },
    { type: "TEXT", pos: 2003, raw: "Bold+Inverse " },
    { type: "CSI", pos: 2016, command: "m", params: ["4"], raw: "\u001b[4m" },
    { type: "TEXT", pos: 2020, raw: "Underline" },
    { type: "CSI", pos: 2029, command: "m", params: ["0", "1", "7"], raw: "\u001b[0;1;7m" },
    { type: "TEXT", pos: 2037, raw: "  " },
    { type: "CSI", pos: 2039, command: "m", params: ["5"], raw: "\u001b[5m" },
    { type: "TEXT", pos: 2043, raw: " Blink   " },
    { type: "CSI", pos: 2052, command: "m", params: ["4"], raw: "\u001b[4m" },
    { type: "TEXT", pos: 2056, raw: "Underline+Blink" },
    { type: "CSI", pos: 2071, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "TEXT", pos: 2075, raw: "\u000a" },
    { type: "DCS", pos: 2076, command: "", params: ["rEM1"], raw: "\u001bPrEM1\u001b\\" },
    { type: "CSI", pos: 2084, command: "A", params: [], raw: "\u001b[A" },
    { type: "TEXT", pos: 2087, raw: "\u000a" },
    { type: "ESC", pos: 2088, command: "#", params: ["6"], raw: "\u001b#6" },
    { type: "TEXT", pos: 2091, raw: "This is double " },
    { type: "CSI", pos: 2106, command: "m", params: ["1"], raw: "\u001b[1m" },
    { type: "TEXT", pos: 2110, raw: "width" },
    { type: "CSI", pos: 2115, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "TEXT", pos: 2119, raw: "\u000a" },
    { type: "ESC", pos: 2120, command: "#", params: ["3"], raw: "\u001b#3" },
    { type: "TEXT", pos: 2123, raw: "This is double " },
    { type: "CSI", pos: 2138, command: "m", params: ["1"], raw: "\u001b[1m" },
    { type: "TEXT", pos: 2142, raw: "height" },
    { type: "CSI", pos: 2148, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "TEXT", pos: 2152, raw: "\u000a" },
    { type: "ESC", pos: 2153, command: "#", params: ["4"], raw: "\u001b#4" },
    { type: "TEXT", pos: 2156, raw: "This is double " },
    { type: "CSI", pos: 2171, command: "m", params: ["1"], raw: "\u001b[1m" },
    { type: "TEXT", pos: 2175, raw: "height" },
    { type: "CSI", pos: 2181, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "TEXT", pos: 2185, raw: "\u000a" },
    { type: "ESC", pos: 2186, command: "#", params: ["6"], raw: "\u001b#6" },
    { type: "CSI", pos: 2189, command: "m", params: ["7", "4"], raw: "\u001b[7;4m" },
    { type: "TEXT", pos: 2195, raw: "_" },
    { type: "CSI", pos: 2196, command: "m", params: ["0", "7"], raw: "\u001b[0;7m" },
    { type: "TEXT", pos: 2202, raw: "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789ioy\u000a" },
    { type: "ESC", pos: 2242, command: "#", params: ["3"], raw: "\u001b#3" },
    { type: "CSI", pos: 2245, command: "m", params: ["7", "4"], raw: "\u001b[7;4m" },
    { type: "TEXT", pos: 2251, raw: "_" },
    { type: "CSI", pos: 2252, command: "m", params: ["0", "7"], raw: "\u001b[0;7m" },
    { type: "TEXT", pos: 2258, raw: "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789ioy\u000a" },
    { type: "ESC", pos: 2298, command: "#", params: ["4"], raw: "\u001b#4" },
    { type: "CSI", pos: 2301, command: "m", params: ["7", "4"], raw: "\u001b[7;4m" },
    { type: "TEXT", pos: 2307, raw: "_" },
    { type: "CSI", pos: 2308, command: "m", params: ["0", "7"], raw: "\u001b[0;7m" },
    { type: "TEXT", pos: 2314, raw: "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789ioy" },
    { type: "CSI", pos: 2353, command: "A", params: ["3"], raw: "\u001b[3A" },
    { type: "TEXT", pos: 2357, raw: "\u000a" },
    { type: "CSI", pos: 2358, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "CSI", pos: 2362, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2365, raw: "A" },
    { type: "CSI", pos: 2366, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2369, raw: "C" },
    { type: "CSI", pos: 2370, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2373, raw: "E" },
    { type: "CSI", pos: 2374, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2377, raw: "G" },
    { type: "CSI", pos: 2378, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2381, raw: "I" },
    { type: "CSI", pos: 2382, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2385, raw: "K" },
    { type: "CSI", pos: 2386, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2389, raw: "M" },
    { type: "CSI", pos: 2390, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2393, raw: "O" },
    { type: "CSI", pos: 2394, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2397, raw: "Q" },
    { type: "CSI", pos: 2398, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2401, raw: "S" },
    { type: "CSI", pos: 2402, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2405, raw: "U" },
    { type: "CSI", pos: 2406, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2409, raw: "W" },
    { type: "CSI", pos: 2410, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2413, raw: "Y" },
    { type: "CSI", pos: 2414, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2417, raw: "0" },
    { type: "CSI", pos: 2418, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2421, raw: "2" },
    { type: "CSI", pos: 2422, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2425, raw: "4" },
    { type: "CSI", pos: 2426, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2429, raw: "6" },
    { type: "CSI", pos: 2430, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2433, raw: "8" },
    { type: "CSI", pos: 2434, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2437, raw: "i" },
    { type: "CSI", pos: 2438, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2441, raw: "y\u000a" },
    { type: "CSI", pos: 2443, command: "m", params: ["4"], raw: "\u001b[4m" },
    { type: "TEXT", pos: 2447, raw: "_" },
    { type: "CSI", pos: 2448, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "CSI", pos: 2452, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2455, raw: "B" },
    { type: "CSI", pos: 2456, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2459, raw: "D" },
    { type: "CSI", pos: 2460, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2463, raw: "F" },
    { type: "CSI", pos: 2464, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2467, raw: "H" },
    { type: "CSI", pos: 2468, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2471, raw: "J" },
    { type: "CSI", pos: 2472, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2475, raw: "L" },
    { type: "CSI", pos: 2476, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2479, raw: "N" },
    { type: "CSI", pos: 2480, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2483, raw: "P" },
    { type: "CSI", pos: 2484, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2487, raw: "R" },
    { type: "CSI", pos: 2488, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2491, raw: "T" },
    { type: "CSI", pos: 2492, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2495, raw: "V" },
    { type: "CSI", pos: 2496, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2499, raw: "X" },
    { type: "CSI", pos: 2500, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2503, raw: "Z" },
    { type: "CSI", pos: 2504, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2507, raw: "1" },
    { type: "CSI", pos: 2508, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2511, raw: "3" },
    { type: "CSI", pos: 2512, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2515, raw: "5" },
    { type: "CSI", pos: 2516, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2519, raw: "7" },
    { type: "CSI", pos: 2520, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2523, raw: "9" },
    { type: "CSI", pos: 2524, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2527, raw: "o\u000a" },
    { type: "CSI", pos: 2529, command: "m", params: ["4"], raw: "\u001b[4m" },
    { type: "TEXT", pos: 2533, raw: "_" },
    { type: "CSI", pos: 2534, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "CSI", pos: 2538, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2541, raw: "B" },
    { type: "CSI", pos: 2542, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2545, raw: "D" },
    { type: "CSI", pos: 2546, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2549, raw: "F" },
    { type: "CSI", pos: 2550, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2553, raw: "H" },
    { type: "CSI", pos: 2554, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2557, raw: "J" },
    { type: "CSI", pos: 2558, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2561, raw: "L" },
    { type: "CSI", pos: 2562, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2565, raw: "N" },
    { type: "CSI", pos: 2566, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2569, raw: "P" },
    { type: "CSI", pos: 2570, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2573, raw: "R" },
    { type: "CSI", pos: 2574, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2577, raw: "T" },
    { type: "CSI", pos: 2578, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2581, raw: "V" },
    { type: "CSI", pos: 2582, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2585, raw: "X" },
    { type: "CSI", pos: 2586, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2589, raw: "Z" },
    { type: "CSI", pos: 2590, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2593, raw: "1" },
    { type: "CSI", pos: 2594, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2597, raw: "3" },
    { type: "CSI", pos: 2598, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2601, raw: "5" },
    { type: "CSI", pos: 2602, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2605, raw: "7" },
    { type: "CSI", pos: 2606, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2609, raw: "9" },
    { type: "CSI", pos: 2610, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2613, raw: "o\u000a" },
    { type: "ESC", pos: 2615, command: "(", params: ["0"], raw: "\u001b(0" },
    { type: "ESC", pos: 2618, command: "#", params: ["6"], raw: "\u001b#6" },
    { type: "CSI", pos: 2621, command: "m", params: ["7"], raw: "\u001b[7m" },
    { type: "TEXT", pos: 2625, raw: "`abcdefghijklmnopqrstuvwxyz{|}~" },
    { type: "CSI", pos: 2656, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "TEXT", pos: 2660, raw: " lqwqk\u000a" },
    { type: "ESC", pos: 2667, command: "#", params: ["3"], raw: "\u001b#3" },
    { type: "CSI", pos: 2670, command: "m", params: ["7"], raw: "\u001b[7m" },
    { type: "TEXT", pos: 2674, raw: "`abcdefghijklmnopqrstuvwxyz{|}~" },
    { type: "CSI", pos: 2705, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "TEXT", pos: 2709, raw: " tqnqu\u000a" },
    { type: "ESC", pos: 2716, command: "#", params: ["4"], raw: "\u001b#4" },
    { type: "CSI", pos: 2719, command: "m", params: ["7"], raw: "\u001b[7m" },
    { type: "TEXT", pos: 2723, raw: "`abcdefghijklmnopqrstuvwxyz{|}~" },
    { type: "CSI", pos: 2754, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "TEXT", pos: 2758, raw: " tqnqu" },
    { type: "CSI", pos: 2764, command: "A", params: ["3"], raw: "\u001b[3A" },
    { type: "CSI", pos: 2768, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "TEXT", pos: 2772, raw: "\u000a" },
    { type: "CSI", pos: 2773, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2776, raw: "a" },
    { type: "CSI", pos: 2777, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2780, raw: "c" },
    { type: "CSI", pos: 2781, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2784, raw: "e" },
    { type: "CSI", pos: 2785, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2788, raw: "g" },
    { type: "CSI", pos: 2789, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2792, raw: "i" },
    { type: "CSI", pos: 2793, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2796, raw: "k" },
    { type: "CSI", pos: 2797, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2800, raw: "m" },
    { type: "CSI", pos: 2801, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2804, raw: "o" },
    { type: "CSI", pos: 2805, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2808, raw: "q" },
    { type: "CSI", pos: 2809, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2812, raw: "s" },
    { type: "CSI", pos: 2813, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2816, raw: "u" },
    { type: "CSI", pos: 2817, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2820, raw: "w" },
    { type: "CSI", pos: 2821, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2824, raw: "y" },
    { type: "CSI", pos: 2825, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2828, raw: "{" },
    { type: "CSI", pos: 2829, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2832, raw: "}\u000a`" },
    { type: "CSI", pos: 2835, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2838, raw: "b" },
    { type: "CSI", pos: 2839, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2842, raw: "d" },
    { type: "CSI", pos: 2843, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2846, raw: "f" },
    { type: "CSI", pos: 2847, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2850, raw: "h" },
    { type: "CSI", pos: 2851, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2854, raw: "j" },
    { type: "CSI", pos: 2855, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2858, raw: "l" },
    { type: "CSI", pos: 2859, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2862, raw: "n" },
    { type: "CSI", pos: 2863, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2866, raw: "p" },
    { type: "CSI", pos: 2867, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2870, raw: "r" },
    { type: "CSI", pos: 2871, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2874, raw: "t" },
    { type: "CSI", pos: 2875, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2878, raw: "v" },
    { type: "CSI", pos: 2879, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2882, raw: "x" },
    { type: "CSI", pos: 2883, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2886, raw: "z" },
    { type: "CSI", pos: 2887, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2890, raw: "|" },
    { type: "CSI", pos: 2891, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2894, raw: "~\u000a`" },
    { type: "CSI", pos: 2897, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2900, raw: "b" },
    { type: "CSI", pos: 2901, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2904, raw: "d" },
    { type: "CSI", pos: 2905, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2908, raw: "f" },
    { type: "CSI", pos: 2909, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2912, raw: "h" },
    { type: "CSI", pos: 2913, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2916, raw: "j" },
    { type: "CSI", pos: 2917, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2920, raw: "l" },
    { type: "CSI", pos: 2921, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2924, raw: "n" },
    { type: "CSI", pos: 2925, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2928, raw: "p" },
    { type: "CSI", pos: 2929, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2932, raw: "r" },
    { type: "CSI", pos: 2933, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2936, raw: "t" },
    { type: "CSI", pos: 2937, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2940, raw: "v" },
    { type: "CSI", pos: 2941, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2944, raw: "x" },
    { type: "CSI", pos: 2945, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2948, raw: "z" },
    { type: "CSI", pos: 2949, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2952, raw: "|" },
    { type: "CSI", pos: 2953, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 2956, raw: "~" },
    { type: "ESC", pos: 2957, command: "(", params: ["B"], raw: "\u001b(B" },
    { type: "TEXT", pos: 2960, raw: "\u000a" },
    { type: "ESC", pos: 2961, command: "#", params: ["6"], raw: "\u001b#6" },
    { type: "CSI", pos: 2964, command: "m", params: ["7"], raw: "\u001b[7m" },
    { type: "TEXT", pos: 2968, raw: "`abcdefghijklmnopqrstuvwxyz{|}~" },
    { type: "ESC", pos: 2999, command: "(", params: ["0"], raw: "\u001b(0" },
    { type: "CSI", pos: 3002, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "TEXT", pos: 3006, raw: " mqvqj" },
    { type: "CSI", pos: 3012, command: "A", params: [], raw: "\u001b[A" },
    { type: "ESC", pos: 3015, command: "(", params: ["B"], raw: "\u001b(B" },
    { type: "TEXT", pos: 3018, raw: "\u000a" },
    { type: "CSI", pos: 3019, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "CSI", pos: 3023, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 3026, raw: "a" },
    { type: "CSI", pos: 3027, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 3030, raw: "c" },
    { type: "CSI", pos: 3031, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 3034, raw: "e" },
    { type: "CSI", pos: 3035, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 3038, raw: "g" },
    { type: "CSI", pos: 3039, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 3042, raw: "i" },
    { type: "CSI", pos: 3043, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 3046, raw: "k" },
    { type: "CSI", pos: 3047, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 3050, raw: "m" },
    { type: "CSI", pos: 3051, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 3054, raw: "o" },
    { type: "CSI", pos: 3055, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 3058, raw: "q" },
    { type: "CSI", pos: 3059, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 3062, raw: "s" },
    { type: "CSI", pos: 3063, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 3066, raw: "u" },
    { type: "CSI", pos: 3067, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 3070, raw: "w" },
    { type: "CSI", pos: 3071, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 3074, raw: "y" },
    { type: "CSI", pos: 3075, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 3078, raw: "{" },
    { type: "CSI", pos: 3079, command: "C", params: [], raw: "\u001b[C" },
    { type: "TEXT", pos: 3082, raw: "}\u000a" },
    { type: "DCS", pos: 3084, command: "", params: ["rEM0"], raw: "\u001bPrEM0\u001b\\" },
    { type: "TEXT", pos: 3092, raw: " $PrEM0 works on GIGI " },
    { type: "CSI", pos: 3114, command: "A", params: [], raw: "\u001b[A" },
    { type: "CSI", pos: 3117, command: "m", params: ["1", "7"], raw: "\u001b[1;7m" },
    { type: "TEXT", pos: 3123, raw: "\u000a   This test created by Joe Smith, 8-May-85   " },
    { type: "CSI", pos: 3170, command: "m", params: ["0"], raw: "\u001b[0m" },
    { type: "TEXT", pos: 3174, raw: "\u000a" },
    { type: "CSI", pos: 3175, command: "r", params: ["1", "-1"], raw: "\u001b[1;r" },
    { type: "CSI", pos: 3180, command: "H", params: ["22", "1"], raw: "\u001b[22;1H" },
    { type: "TEXT", pos: 3187, raw: "\u000a\u000a" },
  ];

  assert.deepEqual(actual, expected);
});
